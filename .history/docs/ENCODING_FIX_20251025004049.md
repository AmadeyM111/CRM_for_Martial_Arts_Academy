# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π CSV —Ñ–∞–π–ª–æ–≤

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
```
–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞: 'utf-8' codec can't decode byte 0xc2 in position 10: invalid continuation byte
```

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ CSV —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –Ω–µ –≤ UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–µ, –∞ –≤ –¥—Ä—É–≥–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Windows-1251, CP1251, ISO-8859-1).

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏**
–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–¥–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π–ª–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `chardet`.

### **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏:**
- ‚úÖ UTF-8 (–æ—Å–Ω–æ–≤–Ω–∞—è)
- ‚úÖ Windows-1251 (CP1251)
- ‚úÖ ISO-8859-1
- ‚úÖ –î—Ä—É–≥–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)

### **–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:**
1. **–ê–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–∞** - —á—Ç–µ–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö 10KB –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–¥–∏—Ä–æ–≤–∫–∏
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `chardet`
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏** - –µ—Å–ª–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å < 70%, –ø—Ä–æ–±—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
4. **Fallback** - –µ—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å, –ø—Ä–æ–±—É–µ–º UTF-8, Windows-1251, CP1251, ISO-8859-1

## üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### **–í –∫–æ–¥–µ:**
```python
def detect_encoding(self, file_path: str) -> str:
    """Detect file encoding"""
    with open(file_path, 'rb') as f:
        raw_data = f.read(10000)  # Read first 10KB
        result = chardet.detect(raw_data)
        encoding = result['encoding']
        confidence = result['confidence']
        
        # Fallback to common encodings if confidence is low
        if confidence < 0.7:
            for fallback_encoding in ['utf-8', 'windows-1251', 'cp1251', 'iso-8859-1']:
                try:
                    with open(file_path, 'r', encoding=fallback_encoding) as test_file:
                        test_file.read(1000)
                    return fallback_encoding
                except UnicodeDecodeError:
                    continue
        
        return encoding or 'utf-8'
```

### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
encoding = self.detect_encoding(file_path)

# –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
with open(file_path, 'r', encoding=encoding) as csvfile:
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞...
```

## üìã –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–¢–µ—Å—Ç —Å UTF-8 —Ñ–∞–π–ª–æ–º:**
```
Detected encoding: utf-8 (confidence: 0.99)
‚úÖ File validation successful!
```

### **–¢–µ—Å—Ç —Å Windows-1251 —Ñ–∞–π–ª–æ–º:**
```
Detected encoding: windows-1251 (confidence: 0.93)
‚úÖ File validation successful!
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### **–î–æ–±–∞–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ chardet:**
```bash
pip install chardet>=5.0.0
```

### **–û–±–Ω–æ–≤–ª–µ–Ω requirements.txt:**
```
# Text encoding detection
chardet>=5.0.0
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –Ω–µ –≤ UTF-8
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–º–ø–æ—Ä—Ç–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ Excel/Word
- ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å —Ä—É—Å—Å–∫–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–æ–¥–∏—Ä–æ–≤–æ–∫
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä—É—Å—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –ù–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

## üìä –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ñ–∞–π–ª–æ–≤

- ‚úÖ **Excel** (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –∫–∞–∫ CSV)
- ‚úÖ **Google Sheets** (—ç–∫—Å–ø–æ—Ä—Ç –≤ CSV)
- ‚úÖ **LibreOffice Calc**
- ‚úÖ **–¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã** (Notepad, VS Code, etc.)
- ‚úÖ **–°–∏—Å—Ç–µ–º—ã Windows** (Windows-1251)
- ‚úÖ **–°–∏—Å—Ç–µ–º—ã Linux/Mac** (UTF-8)

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –∏–º–ø–æ—Ä—Ç CSV —Ñ–∞–π–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏:

1. **–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª** - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –∫–æ–¥–∏—Ä–æ–≤–∫—É
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–π–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ
3. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ** - –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –æ—Ç–æ–±—Ä–∞–∑—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!** üéâ
